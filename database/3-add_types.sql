-- Adding species types
ALTER TYPE species ADD VALUE '1';
ALTER TYPE species ADD VALUE '2';
ALTER TYPE species ADD VALUE '3';

UPDATE animal SET species = '2' WHERE species = 'parrot';
UPDATE animal SET species = '2' WHERE species = 'cat';
UPDATE animal SET species = '1' WHERE species = 'dog';
UPDATE animal SET species = '2' WHERE species = 'snake';
UPDATE animal SET species = '3' WHERE species = 'hamster';
ALTER TYPE species RENAME TO species_old;

CREATE TYPE species AS ENUM ('1', '2', '3');
ALTER TABLE animal ALTER COLUMN species TYPE species USING species::text::species;
DROP TYPE species_old;

-- Changing breed to table to hold id and code values
ALTER TABLE animal DROP COLUMN breed;
DROP type breed;

CREATE TABLE breed (
    id INTEGER PRIMARY KEY,
    code VARCHAR(7),
    species species,
    UNIQUE code
);

INSERT INTO breed (id, species, code)
VALUES
(360, '2', 'ABY'),
(389, '2', 'ABL'),
(351, '2', 'ACS/ACL'),
(392, '2', 'AMW'),
(391, '2', 'AMS'),
(390, '2', 'ABS'),
(393, '2', 'AUM'),
(383, '2', 'BAL'),
(361, '2', 'BEN'),
(356, '2', 'SBI'),
(396, '2', 'BRX'),
(394, '2', 'BOL'),
(395, '2', 'BOS'),
(421, '2', 'BLH'),
(363, '2', 'BRI'),
(362, '2', 'BML'),
(364, '2', 'BUR'),
(397, '2', 'CEY'),
(399, '2', 'CYM'),
(367, '2', 'DRX'),
(368, '2', 'DSP'),
(376, '2', 'MAU'),
(349, '2', 'EXO'),
(431, '2', 'ELF'),
(369, '2', 'EUR'),
(384, '2', 'OLH'),
(371, '2', 'JBT'),
(398, '2', 'CLS'),
(420, '2', 'CAS'),
(365, '2', 'CHA'),
(374, '2', 'KOR'),
(366, '2', 'CRX'),
(372, '2', 'KBL'),
(373, '2', 'KBS'),
(400, '2', 'LPL'),
(401, '2', 'LPS'),
(375, '2', 'MAN'),
(352, '2', 'MCO'),
(435, '2', 'MB'),
(416, '2', 'MK'),
(353, '2', 'NEM'),
(402, '2', 'NEB'),
(354, '2', 'NFO'),
(377, '2', 'OCI'),
(350, '2', 'PER'),
(405, '2', 'PEB'),
(403, '2', 'PBL'),
(404, '2', 'PBS'),
(355, '2', 'RAG'),
(378, '2', 'RUS'),
(419, '2', 'SAV'),
(387, '2', 'SYL'),
(388, '2', 'SYS'),
(409, '2', 'SRL'),
(410, '2', 'SRS'),
(382, '2', 'SPH'),
(386, '2', 'SIA'),
(357, '2', 'SIB'),
(408, '2', 'SIN'),
(379, '2', 'SNO'),
(380, '2', 'SOK'),
(381, '2', 'SOM'),
(411, '2', 'STE'),
(406, '2', 'SFL'),
(407, '2', 'SFS'),
(417, '2', 'SST'),
(412, '2', 'THA'),
(413, '2', 'TIF'),
(414, '2', 'TOL'),
(415, '2', 'TOS'),
(385, '2', 'OSH'),
(358, '2', 'TUA'),
(359, '2', 'TUV'),
(418, '2', 'UL'),
(370, '2', 'GRX'),
(422, '3', 'ŠN'),
(12, '1', 'AP'),
(8, '1', 'AH'),
(167, '1', 'HO'),
(176, '1', 'IRS'),
(177, '1', 'IS'),
(178, '1', 'IT'),
(182, '1', 'iws'),
(181, '1', 'IWH'),
(10, '1', 'AK'),
(11, '1', 'AM'),
(6, '1', 'ADB'),
(158, '1', 'GJD'),
(2, '1', 'AB'),
(3, '1', 'AC'),
(346, '1', 'PIT'),
(18, '1', 'AST'),
(312, '1', 'TFT'),
(20, '1', 'AVS'),
(17, '1', 'asd'),
(136, '1', 'EB'),
(7, '1', 'AF'),
(92, '1', 'CS'),
(139, '1', 'EP'),
(140, '1', 'ES'),
(142, '1', 'ESS'),
(143, '1', 'ET'),
(13, '1', 'APM'),
(267, '1', 'RPG'),
(14, '1', 'APS'),
(5, '1', 'AD'),
(15, '1', 'ARB'),
(25, '1', 'BAN'),
(160, '1', 'GR'),
(16, '1', 'AS'),
(4, '1', 'ACD'),
(284, '1', 'SiT'),
(19, '1', 'AT'),
(22, '1', 'AZP'),
(21, '1', 'Az'),
(26, '1', 'BAR'),
(34, '1', 'BeC'),
(24, '1', 'Ba'),
(39, '1', 'BH'),
(38, '1', 'BG'),
(62, '1', 'BT'),
(57, '1', 'BSG'),
(58, '1', 'BSL'),
(59, '1', 'BSM'),
(61, '1', 'BST'),
(154, '1', 'GBE'),
(88, '1', 'CPB'),
(276, '1', 'SBH'),
(56, '1', 'BS'),
(40, '1', 'BIG'),
(42, '1', 'BYT'),
(43, '1', 'Bl'),
(234, '1', 'OES'),
(47, '1', 'BOL'),
(55, '1', 'BRT'),
(30, '1', 'BC'),
(23, '1', 'B'),
(27, '1', 'BB'),
(48, '1', 'BoT'),
(155, '1', 'GBR'),
(147, '1', 'FB'),
(311, '1', 'TB'),
(33, '1', 'BE'),
(36, '1', 'BFB'),
(37, '1', 'BFG'),
(54, '1', 'BRS'),
(31, '1', 'BdB'),
(153, '1', 'GB'),
(53, '1', 'BRH'),
(46, '1', 'BO'),
(44, '1', 'BM'),
(65, '1', 'BuT'),
(52, '1', 'BrB'),
(45, '1', 'BMS'),
(83, '1', 'CHP'),
(344, '1', 'ZS'),
(95, '1', 'CSV'),
(98, '1', 'ČF'),
(100, '1', 'ČT'),
(73, '1', 'CBR'),
(74, '1', 'CC'),
(82, '1', 'ChL'),
(81, '1', 'ChK'),
(102, '1', 'Da'),
(123, '1', 'DSF'),
(106, '1', 'DDT'),
(68, '1', 'CaD'),
(108, '1', 'DH'),
(101, '1', 'D'),
(107, '1', 'DDV'),
(121, '1', 'DRP'),
(120, '1', 'DR'),
(186, '1', 'JRT'),
(141, '1', 'ESK'),
(144, '1', 'ETS'),
(9, '1', 'AiT'),
(135, '1', 'EA'),
(138, '1', 'EH'),
(145, '1', 'EU'),
(146, '1', 'F'),
(247, '1', 'PH'),
(149, '1', 'FS'),
(32, '1', 'BdF'),
(49, '1', 'BPF'),
(77, '1', 'CCR'),
(28, '1', 'BBG'),
(157, '1', 'GH'),
(165, '1', 'HG'),
(164, '1', 'HB'),
(163, '1', 'H'),
(175, '1', 'IP'),
(171, '1', 'IBS'),
(170, '1', 'IBC'),
(89, '1', 'CR'),
(133, '1', 'DZL'),
(117, '1', 'DNL'),
(112, '1', 'DKL'),
(174, '1', 'IM'),
(172, '1', 'ICE'),
(173, '1', 'IFH'),
(348, '1', 'SAL'),
(156, '1', 'GE'),
(217, '1', 'ME'),
(180, '1', 'IVS'),
(169, '1', 'IB'),
(293, '1', 'SPI'),
(430, '1', 'IH'),
(110, '1', 'DJT'),
(184, '1', 'JC'),
(183, '1', 'J'),
(187, '1', 'JS'),
(188, '1', 'JT'),
(179, '1', 'YT'),
(86, '1', 'coo'),
(79, '1', 'CD'),
(104, '1', 'DC'),
(192, '1', 'KCS'),
(196, '1', 'KLL'),
(190, '1', 'KAA'),
(432, '1', 'CLD'),
(252, '1', 'PPC'),
(197, '1', 'KO'),
(78, '1', 'CCS'),
(193, '1', 'KE'),
(191, '1', 'KBT'),
(96, '1', 'CT'),
(194, '1', 'KEE'),
(75, '1', 'CCD'),
(433, '1', 'KI'),
(84, '1', 'CLS'),
(189, '1', 'K'),
(76, '1', 'CCI'),
(198, '1', 'KOG'),
(91, '1', 'crs'),
(199, '1', 'KRO'),
(114, '1', 'DKV'),
(200, '1', 'KUV'),
(97, '1', 'CWT'),
(209, '1', 'LR'),
(202, '1', 'La'),
(203, '1', 'LH'),
(208, '1', 'LPP'),
(204, '1', 'Lha'),
(212, '1', 'LVS'),
(205, '1', 'LKT'),
(87, '1', 'CP'),
(206, '1', 'LO'),
(159, '1', 'GP'),
(235, '1', 'ON'),
(201, '1', 'L'),
(248, '1', 'PLI'),
(210, '1', 'LS'),
(148, '1', 'FCR'),
(80, '1', 'CDB'),
(216, '1', 'MB'),
(219, '1', 'MT'),
(214, '1', 'MAA'),
(213, '1', 'M'),
(69, '1', 'CaM'),
(223, '1', 'MZG'),
(339, '1', 'XOM'),
(340, '1', 'XoS'),
(341, '1', 'XOV'),
(345, '1', 'MŠ'),
(272, '1', 'S'),
(221, '1', 'MUN'),
(218, '1', 'Mo'),
(220, '1', 'Mu'),
(231, '1', 'NSR'),
(215, '1', 'MaN'),
(224, '1', 'N'),
(63, '1', 'Bum'),
(343, '1', 'ZP'),
(70, '1', 'CaN'),
(228, '1', 'NOR'),
(230, '1', 'NRT'),
(225, '1', 'NB'),
(227, '1', 'NL'),
(229, '1', 'NPL'),
(232, '1', 'NW'),
(166, '1', 'HHH'),
(195, '1', 'KH'),
(233, '1', 'OB'),
(238, '1', 'PA'),
(256, '1', 'PRT'),
(237, '1', 'P'),
(244, '1', 'PDD'),
(245, '1', 'PDM'),
(255, '1', 'PPV'),
(347, '1', 'PO'),
(239, '1', 'PAB'),
(185, '1', 'JO'),
(240, '1', 'PB'),
(137, '1', 'EBP'),
(119, '1', 'DP'),
(50, '1', 'BPL'),
(51, '1', 'BPT'),
(85, '1', 'CMP'),
(250, '1', 'PM'),
(236, '1', 'OP'),
(251, '1', 'POE'),
(257, '1', 'PS'),
(93, '1', 'CSA'),
(243, '1', 'PCP'),
(242, '1', 'PCM'),
(249, '1', 'PLP'),
(71, '1', 'CAP'),
(261, '1', 'PZ'),
(35, '1', 'BF'),
(258, '1', 'PUL'),
(259, '1', 'PUM'),
(323, '1', 'VEO'),
(325, '1', 'VL'),
(269, '1', 'RS'),
(268, '1', 'RR'),
(271, '1', 'RVŠ'),
(262, '1', 'R'),
(90, '1', 'CRM'),
(265, '1', 'RL'),
(66, '1', 'Bz'),
(99, '1', 'ČRT'),
(263, '1', 'RCB'),
(264, '1', 'RG'),
(270, '1', 'RUS'),
(320, '1', 'TTI'),
(319, '1', 'TT'),
(275, '1', 'SAL'),
(273, '1', 'Sa'),
(290, '1', 'SMB'),
(274, '1', 'SAA'),
(301, '1', 'SUS'),
(299, '1', 'StB'),
(280, '1', 'SH'),
(285, '1', 'SK'),
(283, '1', 'SIH'),
(287, '1', 'SKT'),
(67, '1', 'C'),
(286, '1', 'SKP'),
(289, '1', 'SLO'),
(298, '1', 'STA'),
(277, '1', 'SBT'),
(294, '1', 'SPK'),
(296, '1', 'SSK'),
(288, '1', 'SLK'),
(279, '1', 'SD'),
(303, '1', 'ŠAR'),
(292, '1', 'SP'),
(295, '1', 'SS'),
(297, '1', 'ST'),
(282, '1', 'SI'),
(304, '1', 'ŠI'),
(281, '1', 'SHH'),
(307, '1', 'ŠP'),
(152, '1', 'FTW'),
(134, '1', 'DZR'),
(118, '1', 'DNR'),
(113, '1', 'DKR'),
(161, '1', 'GS'),
(278, '1', 'ScT'),
(241, '1', 'PCL'),
(305, '1', 'šl'),
(306, '1', 'ŠLK'),
(302, '1', 'SV'),
(29, '1', 'BBS'),
(162, '1', 'GSS'),
(308, '1', 'T'),
(318, '1', 'TRD'),
(310, '1', 'TAZ'),
(316, '1', 'TM'),
(314, '1', 'TiS'),
(315, '1', 'TiT'),
(72, '1', '2'),
(317, '1', 'To'),
(151, '1', 'FTS'),
(94, '1', 'CSm'),
(132, '1', 'DZK'),
(116, '1', 'DNK'),
(111, '1', 'DKK'),
(321, '1', 'TuB'),
(322, '1', 'US'),
(342, '1', 'ZL'),
(331, '1', 'WHT'),
(333, '1', 'WKK'),
(334, '1', 'WKP'),
(337, '1', 'WSS'),
(338, '1', 'WT'),
(130, '1', 'DVB'),
(131, '1', 'DVG'),
(222, '1', 'MVB'),
(335, '1', 'wl'),
(332, '1', 'WK'),
(324, '1', 'VK'),
(115, '1', 'DMV'),
(266, '1', 'RMV'),
(291, '1', 'SO'),
(330, '1', 'W'),
(122, '1', 'DS'),
(126, '1', 'DSL'),
(103, '1', 'DB'),
(124, '1', 'DSG'),
(105, '1', 'DD'),
(125, '1', 'DSK'),
(129, '1', 'DSZ'),
(336, '1', 'WS'),
(127, '1', 'DSM'),
(128, '1', 'DSP'),
(326, '1', 'VO');

ALTER TABLE animal ADD COLUMN breed INTEGER REFERENCES breed(id);

UPDATE animal SET breed = 205 WHERE name = 'Haskelis';
UPDATE animal SET breed = 268 WHERE name = 'Jupyteris';
UPDATE animal SET breed = 389 WHERE name = 'Murkė';
UPDATE animal SET breed = 350 WHERE name = 'Javainis';
UPDATE animal SET breed = 422 WHERE name = 'Pitoncas';

-- Adding gender types
ALTER TYPE gender ADD VALUE '1';
ALTER TYPE gender ADD VALUE '2';
UPDATE animal SET gender = '1' WHERE gender = 'female';
UPDATE animal SET gender = '2' WHERE gender = 'male';
ALTER TYPE gender RENAME TO gender_old;

CREATE TYPE gender AS ENUM ('1', '2', '3', '4');
ALTER TABLE animal ALTER COLUMN gender TYPE gender USING gender::text::gender;
DROP TYPE gender_old;

-- Adding color types
ALTER TABLE animal DROP COLUMN color;
DROP type color;

CREATE TABLE color (
    code INTEGER PRIMARY KEY,
    species species
);

INSERT INTO color (code, species) VALUES
(51, '1'),
(105, '1'),
(52, '1'),
(53, '1'),
(54, '1'),
(55, '1'),
(56, '1'),
(57, '1'),
(58, '1'),
(59, '1'),
(60, '1'),
(61, '1'),
(62, '1'),
(63, '1'),
(64, '1'),
(104, '1'),
(1, '2'),
(2, '2'),
(3, '2'),
(4, '2'),
(5, '2'),
(6, '2'),
(8, '2'),
(9, '2'),
(10, '2'),
(11, '2'),
(12, '2'),
(13, '2'),
(14, '2'),
(15, '2'),
(16, '2'),
(17, '2'),
(18, '2'),
(19, '2'),
(20, '2'),
(21, '2'),
(22, '2'),
(23, '2'),
(24, '2'),
(25, '2'),
(26, '2'),
(27, '2'),
(28, '2'),
(29, '2'),
(30, '2'),
(31, '2'),
(32, '2'),
(33, '2'),
(34, '2'),
(35, '2'),
(36, '2'),
(37, '2'),
(38, '2'),
(39, '2'),
(40, '2'),
(41, '2'),
(42, '2'),
(43, '2'),
(44, '2'),
(45, '2'),
(46, '2'),
(47, '2'),
(48, '2'),
(49, '2'),
(50, '2'),
(65, '3'),
(66, '3'),
(67, '3'),
(68, '3'),
(69, '3'),
(70, '3'),
(71, '3'),
(72, '3');

ALTER TABLE animal ADD COLUMN color INTEGER REFERENCES color(code);

UPDATE animal SET color = 61 WHERE name = 'Haskelis';
UPDATE animal SET color = 2 WHERE name = 'Jupyteris';
UPDATE animal SET color = 4 WHERE name = 'Murkė';
UPDATE animal SET color = 68 WHERE name = 'Javainis';
UPDATE animal SET color = 32 WHERE name = 'Pitoncas';

-- Adding events
ALTER TYPE event_general ADD VALUE '1';
UPDATE animal_event_general SET type = '1', comments = 'Registration!' WHERE animal = 2;

CREATE TYPE event AS ENUM ('1', '2', '3', '4', '5', '6', '7', '8', '9');
ALTER TABLE animal_event_general ALTER COLUMN type TYPE event USING type::text::event;
DROP TYPE event_general;

ALTER TYPE event_medical ADD VALUE '8';
UPDATE animal_event_medical_record SET type = '8', comments = 'Yearly vaccine' WHERE animal = 4;

ALTER TABLE animal_event_medical_record ALTER COLUMN type TYPE event USING type::text::event;
DROP TYPE event_medical;

-- Droping check in and check out event tables because event_general covers them
DROP TABLE animal_event_check_in;
DROP TABLE animal_event_check_out;